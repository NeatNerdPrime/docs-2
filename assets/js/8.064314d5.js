(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{164:function(e,t,r){"use strict";r.r(t);var s=r(0),a=Object(s.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),r("p",[e._v("Pixelfed uses "),r("a",{attrs:{href:"https://redis.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Redis"),r("OutboundLink")],1),e._v(" to power the job queue that handles many important tasks. You can run the job queue with Horizon or a queue worker.")]),e._v(" "),r("p"),e._m(1),r("p"),e._v(" "),e._m(2),e._v(" "),r("p",[e._v("Horizon provides a beautiful dashboard and code-driven configuration for our Redis queues. Horizon allows you to easily monitor key metrics of your queue system such as job throughput, runtime, and job failures.")]),e._v(" "),r("p",[e._v("While horizon does ship with Pixelfed, it is not enabled by default.")]),e._v(" "),e._m(3),e._v(" "),r("p",[e._v("To install Horizon, run the following commands:")]),e._v(" "),e._m(4),e._m(5),e._v(" "),r("p",[e._v("For more information, refer to the "),r("a",{attrs:{href:"https://laravel.com/docs/6.x/horizon#deploying-horizon",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Documentation"),r("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(6),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("To keep the "),r("code",[e._v("queue:work")]),e._v(" process running permanently in the background, you should use a process monitor such as "),r("a",{attrs:{href:"https://laravel.com/docs/6.x/queues#supervisor-configuration",target:"_blank",rel:"noopener noreferrer"}},[e._v("Supervisor"),r("OutboundLink")],1),e._v(" to ensure that the queue worker does not stop running.")])]),e._v(" "),e._m(10),e._v(" "),r("p",[e._v("Pixelfed supports both "),r("a",{attrs:{href:"https://laravel.com/docs/6.x/horizon",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Horizon"),r("OutboundLink")],1),e._v(" and "),r("a",{attrs:{href:"https://laravel.com/docs/6.x/queues",target:"_blank",rel:"noopener noreferrer"}},[e._v("Queue Workers"),r("OutboundLink")],1),e._v(" to power the job queue. The main difference between Horizon and Queue Worker is the dashboard provided by Horizon as well as advanced load balancing. We recommend using Horizon.")])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"configuring-job-queue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuring-job-queue","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuring Job Queue")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#using-horizon"}},[this._v("Using Horizon")]),t("ul",[t("li",[t("a",{attrs:{href:"#installing-horizon"}},[this._v("Installing Horizon")])]),t("li",[t("a",{attrs:{href:"#supervisor-configuration"}},[this._v("Supervisor Configuration")])])])]),t("li",[t("a",{attrs:{href:"#using-queue-worker"}},[this._v("Using Queue Worker")])]),t("li",[t("a",{attrs:{href:"#horizon-vs-queue-worker"}},[this._v("Horizon vs Queue Worker")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"using-horizon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-horizon","aria-hidden":"true"}},[this._v("#")]),this._v(" Using Horizon")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"installing-horizon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing-horizon","aria-hidden":"true"}},[this._v("#")]),this._v(" Installing Horizon")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("$ php artisan horizon:install\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"supervisor-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#supervisor-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Supervisor Configuration")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{attrs:{class:"token punctuation"}},[e._v("[")]),e._v("program:horizon"),r("span",{attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\nprocess_name"),r("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("%"),r("span",{attrs:{class:"token punctuation"}},[e._v("(")]),e._v("program_name"),r("span",{attrs:{class:"token punctuation"}},[e._v(")")]),e._v("s\ncommand"),r("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("php /home/forge/app.com/artisan horizon\nautostart"),r("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("true\nautorestart"),r("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("true\nuser"),r("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("forge\nredirect_stderr"),r("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("true\nstdout_logfile"),r("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("/home/forge/app.com/horizon.log\nstopwaitsecs"),r("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("3600\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"using-queue-worker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-queue-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" Using Queue Worker")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Pixelfed includes a queue worker that will process new jobs as they are pushed onto the queue. You may run the worker using the "),t("code",[this._v("queue:work")]),this._v(" Artisan command. Note that once the "),t("code",[this._v("queue:work")]),this._v(" command has started, it will continue to run until it is manually stopped or you close your terminal:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("$ php artisan queue:work\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"horizon-vs-queue-worker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#horizon-vs-queue-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" Horizon vs Queue Worker")])}],!1,null,null,null);a.options.__file="configuring-queue.md";t.default=a.exports}}]);